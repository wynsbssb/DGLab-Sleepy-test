:root {
  --light-bg-rgb: 240, 248, 255;
  --dark-bg-rgb: 26, 21, 20;
  --card-alpha: 0.6;
  --font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  --accent-blue: #1570EF;
  --accent-green: #2E7D32;
  --accent-orange: #FF7043;
  --accent-purple: #6C5CE7;
}
html {
  height: 100%;
  width: 100%;
}
body {
  background: #0F1115; /* 深色背景 */
  color: #E6EEF3;
  min-height: 100vh;
  font-family: var(--font-family);
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  background-attachment: fixed;
}
a {
  text-decoration: none;
}
button {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
}
button:hover {
  background: var(--control-bg);
}
div p {
  opacity: 0.8;
}
#moonlight {
  position: absolute;
  right: 10px;
  top: 10px;
}
#moonlight svg {
  width: 40px;
  height: 40px;
}
#slider {
  position: absolute;
  left: 10px;
  top: 10px;
}
#slider svg {
  width: 40px;
  height: 40px;
}
#sliderRange {
  display: none;
  position: absolute;
  border: none;
  top: 10px;
  left: 60px;
  filter: invert(0.8);
}
.light {
  background-color: rgba(var(--light-bg-rgb), var(--card-alpha));
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  color: black;
  border: 1px solid rgba(255, 255, 255, 0.6);
}
.dark {
  background-color: rgba(var(--dark-bg-rgb), var(--card-alpha));
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  color: white;
  border: 1px solid rgba(60, 60, 60, 0.8);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}
.card {
  border-radius: 30px;
  padding: 2rem 1rem;
  margin: 1rem auto;
  font-size: 1.1em;
  width: 40%;
  text-align: center;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  position: relative;
  box-shadow: 0 8px 32px rgb(174 137 245 / 20%),
    inset 0 0 6px 1px rgb(185 210 216 / 10%);
  transition: all 0.5s;
}
.card:hover {
  transition: all 0.3s;
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(206, 140, 210, 0.2);
}
.glass {
  height: 200px;
}
#last-updated {
  font-size: 0.8em;
}
.card p {
  font-size: 1.1em;
  margin: 1rem;
}
.container {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  width: 100%;
  max-width: 1200px;
  padding: 24px;
  box-sizing: border-box;
}

/* Dashboard layout */
.dashboard-top { margin-bottom: 18px }
.stat-row { display:flex; gap:12px; }
.stat-card { flex:1; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); }
.stat-card .stat-value { font-size:1.45em; font-weight:700 }
.stat-card .stat-label { font-size:0.86em; color: rgba(230,238,243,0.7); margin-top:6px }
.stat-card { flex:1; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); display:flex; flex-direction:column; align-items:flex-start; gap:6px }
.stat-card .stat-value { font-size:1.45em; font-weight:700 }
.stat-card .stat-label { font-size:0.86em; color: rgba(230,238,243,0.7); margin-top:6px }
.stat-card.blue { border-left:4px solid var(--accent-blue); box-shadow: 0 6px 18px rgba(21,112,239,0.04); }
.stat-card.green { border-left:4px solid var(--accent-green); box-shadow: 0 6px 18px rgba(46,125,50,0.04); }
.stat-card.orange { border-left:4px solid var(--accent-orange); box-shadow: 0 6px 18px rgba(255,112,67,0.04); }
.stat-card.purple { border-left:4px solid var(--accent-purple); box-shadow: 0 6px 18px rgba(108,92,231,0.04); }

/* hyphenated variants used in templates (stat-blue, stat-green, etc.) */
.stat-card.stat-blue { border-left:4px solid var(--accent-blue); box-shadow: 0 6px 18px rgba(21,112,239,0.06); }
.stat-card.stat-green { border-left:4px solid var(--accent-green); box-shadow: 0 6px 18px rgba(46,125,50,0.06); }
.stat-card.stat-orange { border-left:4px solid var(--accent-orange); box-shadow: 0 6px 18px rgba(255,112,67,0.06); }
.stat-card.stat-purple { border-left:4px solid var(--accent-purple); box-shadow: 0 6px 18px rgba(108,92,231,0.06); }

/* stat card icon */
.stat-card .stat-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 6px;
  border-radius: 6px;
  background: rgba(255,255,255,0.02);
}
.stat-card .stat-icon svg { width: 20px; height: 20px; opacity: 0.95 }
.stat-card .stat-value { font-size:1.45em; font-weight:800; color: #FFFFFF }
.stat-card .stat-label { font-size:0.82em; color: rgba(230,238,243,0.65); margin-top:4px }

.dashboard-main { display:flex; gap:16px; align-items:flex-start }
.devices-list { width: 260px; max-height: 68vh; overflow:auto; padding:8px; }
.charts { flex:1; display:flex; flex-direction:column; gap:12px }
.charts-top { display:flex; gap:12px }
.chart-card { background: rgba(255,255,255,0.02); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); flex:1 }
.charts-bottom { display:flex; gap:12px }
.chart-card h4 { margin:0 0 8px 0 }

/* recent table and progress list */
#progress-list .app-row { display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.02) }
#recent-table table { width:100%; border-collapse:collapse; }
#recent-table td, #recent-table th { padding:8px; border-bottom:1px solid rgba(255,255,255,0.03); font-size:0.9em }

/* small helpers */
.muted { color: rgba(230,238,243,0.6) }

@media (max-width: 900px) {
  .dashboard-main { flex-direction:column }
  .devices-list { width:100%; max-height:200px }
}
@media (max-width: 700px) {
  body {
    touch-action: pan-y;
  }
  .card {
    width: 90%;
  }
}
.sleeping {
  color: gray;
}
.awake {
  color: rgb(16, 128, 0);
}
.error {
  color: red;
}
#hitokoto {
  border-radius: 0.5rem;
  padding: 0.8rem 1rem;
}
#hitokoto_text {
  color: rgba(180, 40, 200, 0.9);
}
.dark a,
.dark .awake {
  color: rgb(100, 255, 100);
  text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
}
.light a,
.light .awake {
  color: rgb(0, 100, 0);
}
.theme-controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
  padding: 10px;
  z-index: 1000;
}
.opacity-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  color: white;
}
.opacity-controls button {
  background: rgba(255, 255, 255, 0.3);
  border: none;
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
}
.opacity-controls button:hover {
  background: rgba(255, 255, 255, 0.5);
}
.dark a.sleeping,
.light a.sleeping {
  color: gray !important;
}
.dark a.error,
.light a.error {
  color: red !important;
}
/* Steam Card */
.steam_card {
  text-align: center;
}
/* 控制栏按钮 */
button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: 0.3s;
  color: var(--text-color);
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
}
button:hover {
  background: var(--control-bg);
}
/* 进度条滑块 */
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
  width: 12px;
  height: 12px;
  background: var(--text-color);
  border-radius: 50%;
}

/* DG-Lab按钮样式 */
.dg-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: #4a148c;
  color: white;
  padding: clamp(12px, 2vw, 20px) clamp(20px, 3vw, 40px);
  border-radius: clamp(8px, 1vw, 12px);
  font-size: clamp(16px, 2vw, 22px);
  font-weight: bold;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-width: 90%;
  margin: 0 auto;
}

.dg-btn:hover {
  background-color: #7b1fa2;
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.dg-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.dg-btn:disabled {
  background-color: #9e9e9e;
  cursor: not-allowed;
}

.text-icon {
  width: clamp(24px, 3vw, 32px);
  height: clamp(24px, 3vw, 32px);
  margin-right: clamp(8px, 1vw, 12px);
}

/* 攻击结果样式 */
#attack-result {
  animation: fadeIn 0.5s ease-in-out;
  transition: all 0.5s ease;
  font-family: 'Microsoft YaHei', sans-serif;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  max-width: 300px;
  margin: 10px auto !important;
  line-height: 1.5;
  text-align: center;
  padding: 10px;
  border-radius: 8px;
}

/* Devices layout */
.devices-container {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  margin-top: 0.75rem;
}
.devices-list {
  width: 45%;
  max-height: 320px;
  overflow-y: auto;
  text-align: left;
  padding: 10px;
}
.device-box {
  padding: 10px 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  background: rgba(255,255,255,0.06);
  cursor: pointer;
  transition: background 0.15s, transform 0.12s;
  border: 1px solid rgba(255,255,255,0.04);
}
.device-box:hover { transform: translateY(-2px); background: rgba(255,255,255,0.08);} 
.device-box.active { box-shadow: 0 6px 18px rgba(0,0,0,0.2); border-color: rgba(0,255,0,0.15);} 
.device-box .meta { font-size: 0.9em; color: rgba(255,255,255,0.8);} 
.device-meta-row { display:flex; gap:8px; align-items:center; font-size:0.95em; }
.status-dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.status-dot.alive { background: #2E7D32; box-shadow: 0 0 6px rgba(46,125,50,0.25); }
.status-dot.idle { background: #9E9E9E; opacity:0.9; }
.battery-inline { color: rgba(255,255,255,0.85); font-weight:600; }
 
.device-detail {
  width: 55%;
  padding: 12px;
  border-radius: 8px;
  background: rgba(255,255,255,0.03);
  min-height: 120px;
}

/* 新的信息盒子样式 */
.info-box {
    border: 1px solid rgba(0,0,0,0.12);
    background: rgba(255,255,255,0.85);
    padding: 12px;
    border-radius: 8px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}

.device-card {
  position: relative;
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: 10px;
  padding: 14px;
  margin: 8px 0;
  background: rgba(255,255,255,0.04); /* 深色卡片 */
  transition: background 180ms ease, box-shadow 200ms ease, border-color 180ms ease;
}

.device-card .card-head {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
/* expand toggle button */
.device-card .expand-toggle {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 36px;
  height: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.02);
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--accent-blue);
  cursor: pointer;
  transition: transform 180ms ease, background 160ms ease;
}
.device-card .expand-toggle svg { display:block }
.device-card .expand-toggle[aria-expanded="true"] { transform: rotate(180deg); background: rgba(255,255,255,0.04) }
.device-card .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 360ms cubic-bezier(.2,.8,.2,1), padding 240ms ease; padding: 0 0; }
.device-card.expanded .card-expand-body { max-height: 320px; padding: 12px 0 0 0; }

/* also support expand toggles in server-rendered device-box list */
.device-box { position: relative }
.device-box .expand-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.02);
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  transition: transform 140ms ease, background 120ms ease;
}
.device-box .expand-toggle svg { display:block }
.device-box .expand-toggle[aria-expanded="true"] { transform: rotate(180deg); background: rgba(255,255,255,0.04) }
.device-box .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 320ms cubic-bezier(.2,.8,.2,1), padding 200ms ease; padding: 0 0; }
.device-box.expanded .card-expand-body { max-height: 240px; padding: 10px 0 0 0; }
.device-title { font-weight:600; font-size:1.02em; margin-bottom:6px; display:inline-flex; align-items:center; gap:8px }
.device-type { width:16px; height:16px; display:inline-block; background-size:contain; background-repeat:no-repeat; opacity:0.95 }
/* small built-in icons using CSS fallback shapes */
.device-type.phone { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="%23ffffff" d="M7 2h10a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM12 20a1.25 1.25 0 1 0 0-2.5A1.25 1.25 0 0 0 12 20z"/></svg>'); }
.device-type.computer { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="%23ffffff" d="M3 5h18v11H3zM2 18h20v2H2z"/></svg>'); }

.status-pill { position:absolute; top:10px; right:10px; padding:4px 8px; border-radius:999px; font-size:0.82em; font-weight:600; color:#fff; opacity:0.98; }
.status-pill.stopped { background: rgba(176,0,32,0.18); color:#B00020 }
.status-pill.running { background: rgba(46,125,50,0.12); color:#2E7D32 }
.status-pill.sync { background: rgba(21,112,239,0.12); color:#1570EF }
.status-pill.error { background: rgba(255,112,67,0.12); color:#FF7043 }

.device-card .battery { display:inline-flex; align-items:center; gap:8px }
.battery-shell { width:36px; height:16px; border-radius:3px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.08); overflow:hidden; position:relative }
.battery-inner { height:100%; background:#ffffff; transition: width 420ms cubic-bezier(.2,.8,.2,1); }
.battery-text { font-weight:700; color: rgba(255,255,255,0.9); }
.battery-low .battery-inner { background: #FF7043 }

.device-status { margin-top:8px; color: rgba(255,255,255,0.85); font-size:0.95em }
.device-status .label { color: rgba(255,255,255,0.9); font-weight:600 }
.device-status .current-app { display:inline-block; max-width:45ch; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; vertical-align:baseline; margin-left:6px }
.current-app { color: rgba(255,255,255,0.95); font-weight:700 }
.current-app.running-app { text-shadow: 0 1px 0 rgba(0,0,0,0.18); }

.device-card:hover { background: rgba(255,255,255,0.06); transform: translateY(-3px); box-shadow: 0 6px 18px rgba(21,112,239,0.06); border-color: rgba(21,112,239,0.12);} 
.device-card:active { background: rgba(255,255,255,0.08); box-shadow: 0 10px 28px rgba(21,112,239,0.12);} 
.device-card.active { box-shadow: 0 16px 48px rgba(21,112,239,0.12); border-color: rgba(21,112,239,0.18);} 

/* non-active appear lower contrast */
.devices-list .device-card:not(.active) { border-color: rgba(255,255,255,0.03); opacity:0.98 }

/* smooth transitions for text color */
.device-card, .device-card * { transition: color 160ms ease, background 160ms ease }

/* expanded inline details */
.device-card .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 360ms cubic-bezier(.2,.8,.2,1), padding 240ms ease; padding: 0 0; }
.device-card.expanded { box-shadow: 0 20px 60px rgba(21,112,239,0.12); border-color: rgba(21,112,239,0.18); }
.device-card.expanded .card-expand-body { max-height: 300px; padding: 12px 0 0 0; }

/* expand toggle button */
.expand-toggle { background: transparent; border: 1px solid rgba(255,255,255,0.06); padding:6px; border-radius:6px; color: rgba(255,255,255,0.9); cursor:pointer }
.expand-toggle:focus { outline: 2px solid rgba(21,112,239,0.18); outline-offset: 2px }

/* refined status pill size */
.status-pill { padding:3px 8px; font-size:0.78em }

/* focus states for keyboard navigation */
.device-box:focus, .device-card:focus { outline: 2px solid rgba(21,112,239,0.12); outline-offset: 2px }

/* battery baseline alignment */
.card-head > div:last-child { display:flex; align-items:center }

/* small-screen adjustments */
@media (max-width: 720px) {
  .devices-list { width:100%; max-height:200px }
  .device-detail { width:100%; margin-top:12px }
  .device-card { padding:10px }
}

.device-status {
    margin-top:8px;
    color: #555;
}

.devices-detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap: 12px;
    margin-top: 12px;
}

.mini-grid { display:flex; gap:4px; margin-top:6px; }
.mini-hour { width:10px; height:18px; border-radius:2px; background: rgba(255,255,255,0.06); }
.mini-hour.filled { background: #2E7D32; box-shadow: 0 2px 6px rgba(46,125,50,0.08);} 
.mini-hour.empty { background: rgba(255,255,255,0.03); opacity:0.7 }
.history-grid-mini { display:flex; gap:4px; margin-top:6px }

.summary-row { display:flex; gap:12px; flex-wrap:wrap; }
.stat-box { border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:6px; background:#fff; }
.muted { color: #666; font-size:0.9em; }
.totals-list { margin-top:8px; display:flex; gap:12px; align-items:flex-start }
.most-used .app-icon { width:36px; height:36px; border-radius:50%; background: linear-gradient(135deg,#e6f0ff,#d6e8ff); display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#1570EF; margin-right:8px; border:1px solid rgba(21,112,239,0.08) }
.most-used .stat-text { display:inline-block }
.timeline-icon { vertical-align:middle; margin-right:6px }
.popover .muted { color:#555 }
.tot-item { margin-top:4px; }
.loading { opacity:0.7 }
.totals-list-rows { width: 100%; }
.detailed-row { padding:8px; border-radius:6px; background: rgba(255,255,255,0.04); margin-top:6px; cursor:pointer; }
.row-main { display:flex; justify-content:space-between; align-items:center; }
.row-name { font-weight:600 }
.progress { height:10px; background: rgba(0,0,0,0.06); border-radius:6px; overflow:hidden; margin-top:6px }
.progress-fill { height:100%; width:0%; transition: width 0.9s cubic-bezier(.2,.8,.2,1); }
.detailed-row.highlight { box-shadow:0 8px 22px rgba(21,112,239,0.08); }
.popover { position: absolute; background:#fff; border-radius:8px; padding:10px; box-shadow:0 8px 24px rgba(0,0,0,0.12); z-index:9999; }
.popover .muted { color:#666 }

.history-wrap { margin-top:8px }
.history-grid {
  display: grid;
  grid-template-columns: repeat(24, 1fr);
  gap: 3px;
  margin-top: 10px;
  align-items: end;
}
.history-grid .hour {
  height: 36px;
  border-radius: 4px;
  font-size: 10px;
  color: rgba(0,0,0,0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.history-grid .hour .filled, .history-grid .hour .empty { width:100%; border-radius:4px; display:flex; align-items:flex-end; justify-content:center; }
.history-grid .hour .empty { background: rgba(0,0,0,0.06); color: rgba(255,255,255,0.7);}
.history-grid .hour .filled { background: rgba(64,128,255,0.9); color: #fff;}

/* modal for hour details */
.modal { position: fixed; left:0; right:0; top:0; bottom:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.25); z-index:9999; }
.modal-card { background:#fff; border-radius:8px; padding:14px; width:min(560px,90%); box-shadow:0 8px 24px rgba(0,0,0,0.15); }
.modal-card h4 { margin:0 0 8px 0 }
.modal-row { padding:6px 0; border-bottom:1px dashed #eee }
.modal-actions { text-align:right; margin-top:8px }

/* donut */
.donut-wrap { display:inline-block; width:120px; height:120px; vertical-align:middle; margin-right:12px }
.donut-center { font-weight:700; text-align:center }
.tot-item { padding:6px 0 }
.app-row.highlight { background: rgba(21,112,239,0.06); }
.highlight { box-shadow: 0 6px 18px rgba(21,112,239,0.12); transition: box-shadow 0.2s; }


@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
} 

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(10px); }
}
