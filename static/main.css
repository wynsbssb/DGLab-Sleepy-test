:root {
  --light-bg-rgb: 255, 255, 255;
  --card-alpha: 0.5;
  --font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  --accent-blue: #2563eb;
  --accent-green: #16a34a;
  --accent-orange: #f97316;
  --accent-purple: #7c3aed;
  --text-strong: #0f172a;
  --text-subtle: #4b5563;
  --panel: rgba(255, 255, 255, 0.5);
  --panel-strong: rgba(255, 255, 255, 0.5);
  --panel-border: rgba(0, 0, 0, 0.08);
  --panel-highlight: rgba(37, 99, 235, 0.12);
}
html {
  height: 100%;
  width: 100%;
}
body {
  background: transparent;
  color: var(--text-strong);
  min-height: 100vh;
  font-family: var(--font-family);
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  background-attachment: fixed;
}
a {
  text-decoration: none;
}
button {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
}
button:hover {
  background: var(--control-bg);
}
div p {
  opacity: 0.9;
}
.light {
  background-color: rgba(var(--light-bg-rgb), var(--card-alpha));
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  color: black;
  border: 1px solid rgba(255, 255, 255, 0.6);
}
.dark {
  background-color: rgba(var(--dark-bg-rgb), var(--card-alpha));
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  color: white;
  border: 1px solid rgba(60, 60, 60, 0.8);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}
.card {
  border-radius: 30px;
  padding: 2rem 1rem;
  margin: 1rem auto;
  font-size: 1.1em;
  width: 40%;
  text-align: center;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  position: relative;
  box-shadow: 0 8px 32px rgb(174 137 245 / 20%),
    inset 0 0 6px 1px rgb(185 210 216 / 10%);
  transition: all 0.5s;
}
.card:hover {
  transition: all 0.3s;
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(206, 140, 210, 0.2);
}
.glass {
  height: 200px;
}
#last-updated {
  font-size: 0.8em;
}
.card p {
  font-size: 1.1em;
  margin: 1rem;
}
.container {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  width: 100%;
  max-width: 1200px;
  padding: 24px;
  box-sizing: border-box;
  margin: 0 auto;
}

/* Dashboard layout */
.dashboard-top { margin-bottom: 18px }
.stat-row { display:flex; gap:12px; }
.stat-card { flex:1; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); }
.stat-card .stat-value { font-size:1.45em; font-weight:700 }
.stat-card .stat-label { font-size:0.86em; color: rgba(230,238,243,0.7); margin-top:6px }
.stat-card { flex:1; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); display:flex; flex-direction:column; align-items:flex-start; gap:6px }
.stat-card .stat-value { font-size:1.45em; font-weight:700 }
.stat-card .stat-label { font-size:0.86em; color: rgba(230,238,243,0.7); margin-top:6px }
.stat-card.blue { border-left:4px solid var(--accent-blue); box-shadow: 0 6px 18px rgba(21,112,239,0.04); }
.stat-card.green { border-left:4px solid var(--accent-green); box-shadow: 0 6px 18px rgba(46,125,50,0.04); }
.stat-card.orange { border-left:4px solid var(--accent-orange); box-shadow: 0 6px 18px rgba(255,112,67,0.04); }
.stat-card.purple { border-left:4px solid var(--accent-purple); box-shadow: 0 6px 18px rgba(108,92,231,0.04); }

/* hyphenated variants used in templates (stat-blue, stat-green, etc.) */
.stat-card.stat-blue { border-left:4px solid var(--accent-blue); box-shadow: 0 6px 18px rgba(21,112,239,0.06); }
.stat-card.stat-green { border-left:4px solid var(--accent-green); box-shadow: 0 6px 18px rgba(46,125,50,0.06); }
.stat-card.stat-orange { border-left:4px solid var(--accent-orange); box-shadow: 0 6px 18px rgba(255,112,67,0.06); }
.stat-card.stat-purple { border-left:4px solid var(--accent-purple); box-shadow: 0 6px 18px rgba(108,92,231,0.06); }

/* stat card icon */
.stat-card .stat-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 6px;
  border-radius: 6px;
  background: rgba(255,255,255,0.02);
}
.stat-card .stat-icon svg { width: 20px; height: 20px; opacity: 0.95 }
.stat-card .stat-value { font-size:1.45em; font-weight:800; color: #FFFFFF }
.stat-card .stat-label { font-size:0.82em; color: rgba(230,238,243,0.65); margin-top:4px }

.dashboard-main { display:flex; gap:16px; align-items:flex-start }
.devices-list { width: 260px; max-height: 68vh; overflow:auto; padding:8px; }
.charts { flex:1; display:flex; flex-direction:column; gap:12px }
.charts-top { display:flex; gap:12px }
.chart-card { background: rgba(255,255,255,0.02); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); flex:1 }
.charts-bottom { display:flex; gap:12px }
.chart-card h4 { margin:0 0 8px 0 }

/* recent table and progress list */
#progress-list .app-row { display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.02) }
#recent-table table { width:100%; border-collapse:collapse; }
#recent-table td, #recent-table th { padding:8px; border-bottom:1px solid rgba(255,255,255,0.03); font-size:0.9em }

/* small helpers */
.muted { color: var(--text-subtle); }

@media (max-width: 900px) {
  .dashboard-main { flex-direction:column }
  .devices-list { width:100%; max-height:200px }
}
@media (max-width: 700px) {
  body {
    touch-action: pan-y;
  }
  .card {
    width: 90%;
  }
}
.sleeping {
  color: gray;
}
.awake {
  color: rgb(16, 128, 0);
}
.error {
  color: red;
}
#hitokoto {
  border-radius: 0.5rem;
  padding: 0.8rem 1rem;
}
#hitokoto_text {
  color: rgba(180, 40, 200, 0.9);
}
.dark a,
.dark .awake {
  color: rgb(100, 255, 100);
  text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
}
.light a,
.light .awake {
  color: rgb(0, 100, 0);
}
.theme-controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
  padding: 10px;
  z-index: 1000;
}
.opacity-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  color: white;
}
.opacity-controls button {
  background: rgba(255, 255, 255, 0.3);
  border: none;
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
}
.opacity-controls button:hover {
  background: rgba(255, 255, 255, 0.5);
}
.dark a.sleeping,
.light a.sleeping {
  color: gray !important;
}
.dark a.error,
.light a.error {
  color: red !important;
}
/* Steam Card */
.steam_card {
  text-align: center;
}
/* 控制栏按钮 */
button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: 0.3s;
  color: var(--text-color);
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
}
button:hover {
  background: var(--control-bg);
}
/* 进度条滑块 */
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; /* 兼容 WebKit 内核浏览器 */
  appearance: none; /* 标准属性，提升兼容性 */
  width: 12px;
  height: 12px;
  background: var(--text-color);
  border-radius: 50%;
}

/* DG-Lab按钮样式 */
.dg-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: #4a148c;
  color: white;
  padding: clamp(12px, 2vw, 20px) clamp(20px, 3vw, 40px);
  border-radius: clamp(8px, 1vw, 12px);
  font-size: clamp(16px, 2vw, 22px);
  font-weight: bold;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-width: 90%;
  margin: 0 auto;
}

.dg-btn:hover {
  background-color: #7b1fa2;
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.dg-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.dg-btn:disabled {
  background-color: #9e9e9e;
  cursor: not-allowed;
}

.text-icon {
  width: clamp(24px, 3vw, 32px);
  height: clamp(24px, 3vw, 32px);
  margin-right: clamp(8px, 1vw, 12px);
}

/* 攻击结果样式 */
#attack-result {
  animation: fadeIn 0.5s ease-in-out;
  transition: all 0.5s ease;
  font-family: 'Microsoft YaHei', sans-serif;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  max-width: 300px;
  margin: 10px auto !important;
  line-height: 1.5;
  text-align: center;
  padding: 10px;
  border-radius: 8px;
}

/* Devices layout */
.devices-container {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  margin-top: 0.75rem;
}
.devices-list {
  width: 45%;
  max-height: 320px;
  overflow-y: auto;
  text-align: left;
  padding: 10px;
}
.device-box {
  padding: 10px 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  background: rgba(255,255,255,0.06);
  cursor: pointer;
  transition: background 0.15s, transform 0.12s;
  border: 1px solid rgba(255,255,255,0.04);
}
.device-box:hover { transform: translateY(-2px); background: rgba(255,255,255,0.08);} 
.device-box.active { box-shadow: 0 6px 18px rgba(0,0,0,0.2); border-color: rgba(0,255,0,0.15);} 
.device-box .meta { font-size: 0.9em; color: rgba(255,255,255,0.8);} 
.device-meta-row { display:flex; gap:8px; align-items:center; font-size:0.95em; }
.status-dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.status-dot.alive { background: #2E7D32; box-shadow: 0 0 6px rgba(46,125,50,0.25); }
.status-dot.idle { background: #9E9E9E; opacity:0.9; }
.battery-inline { color: rgba(255,255,255,0.85); font-weight:600; }
 
.device-detail {
  width: 55%;
  padding: 12px;
  border-radius: 8px;
  background: rgba(255,255,255,0.03);
  min-height: 120px;
}

/* 新的信息盒子样式 */
.info-box {
    border: 1px solid rgba(0,0,0,0.12);
    background: rgba(255,255,255,0.85);
    padding: 12px;
    border-radius: 8px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}

.device-card {
  position: relative;
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: 10px;
  padding: 14px;
  margin: 8px 0;
  background: rgba(255,255,255,0.04); /* 深色卡片 */
  transition: background 180ms ease, box-shadow 200ms ease, border-color 180ms ease;
}

.device-card .card-head {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
/* expand toggle button */
.device-card .expand-toggle {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 36px;
  height: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.02);
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--accent-blue);
  cursor: pointer;
  transition: transform 180ms ease, background 160ms ease;
}
.device-card .expand-toggle svg { display:block }
.device-card .expand-toggle[aria-expanded="true"] { transform: rotate(180deg); background: rgba(255,255,255,0.04) }
.device-card .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 360ms cubic-bezier(.2,.8,.2,1), padding 240ms ease; padding: 0 0; }
.device-card.expanded .card-expand-body { max-height: 320px; padding: 12px 0 0 0; }

/* also support expand toggles in server-rendered device-box list */
.device-box { position: relative }
.device-box .expand-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.02);
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  transition: transform 140ms ease, background 120ms ease;
}
.device-box .expand-toggle svg { display:block }
.device-box .expand-toggle[aria-expanded="true"] { transform: rotate(180deg); background: rgba(255,255,255,0.04) }
.device-box .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 320ms cubic-bezier(.2,.8,.2,1), padding 200ms ease; padding: 0 0; }
.device-box.expanded .card-expand-body { max-height: 240px; padding: 10px 0 0 0; }
.device-title { font-weight:600; font-size:1.02em; margin-bottom:6px; display:inline-flex; align-items:center; gap:8px }
.device-type { width:16px; height:16px; display:inline-block; background-size:contain; background-repeat:no-repeat; opacity:0.95 }
/* small built-in icons using CSS fallback shapes */
.device-type.phone { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="%23ffffff" d="M7 2h10a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM12 20a1.25 1.25 0 1 0 0-2.5A1.25 1.25 0 0 0 12 20z"/></svg>'); }
.device-type.computer { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="%23ffffff" d="M3 5h18v11H3zM2 18h20v2H2z"/></svg>'); }

.status-pill { position:absolute; top:10px; right:10px; padding:4px 8px; border-radius:999px; font-size:0.82em; font-weight:600; color:#fff; opacity:0.98; }
.status-pill.stopped { background: rgba(176,0,32,0.18); color:#B00020 }
.status-pill.running { background: rgba(46,125,50,0.12); color:#2E7D32 }
.status-pill.sync { background: rgba(21,112,239,0.12); color:#1570EF }
.status-pill.error { background: rgba(255,112,67,0.12); color:#FF7043 }

.device-card .battery { display:inline-flex; align-items:center; gap:8px }
.battery-shell { width:36px; height:16px; border-radius:3px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.08); overflow:hidden; position:relative }
.battery-inner { height:100%; background:#ffffff; transition: width 420ms cubic-bezier(.2,.8,.2,1); }
.battery-text { font-weight:700; color: rgba(255,255,255,0.9); }
.battery-low .battery-inner { background: #FF7043 }

.device-status { margin-top:8px; color: rgba(255,255,255,0.85); font-size:0.95em }
.device-status .label { color: rgba(255,255,255,0.9); font-weight:600 }
.device-status .current-app { display:inline-block; max-width:45ch; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; vertical-align:baseline; margin-left:6px }
.current-app { color: rgba(255,255,255,0.95); font-weight:700 }
.current-app.running-app { text-shadow: 0 1px 0 rgba(0,0,0,0.18); }

.device-card:hover { background: rgba(255,255,255,0.06); transform: translateY(-3px); box-shadow: 0 6px 18px rgba(21,112,239,0.06); border-color: rgba(21,112,239,0.12);} 
.device-card:active { background: rgba(255,255,255,0.08); box-shadow: 0 10px 28px rgba(21,112,239,0.12);} 
.device-card.active { box-shadow: 0 16px 48px rgba(21,112,239,0.12); border-color: rgba(21,112,239,0.18);} 

/* non-active appear lower contrast */
.devices-list .device-card:not(.active) { border-color: rgba(255,255,255,0.03); opacity:0.98 }

/* smooth transitions for text color */
.device-card, .device-card * { transition: color 160ms ease, background 160ms ease }

/* expanded inline details */
.device-card .card-expand-body { max-height: 0; overflow: hidden; transition: max-height 360ms cubic-bezier(.2,.8,.2,1), padding 240ms ease; padding: 0 0; }
.device-card.expanded { box-shadow: 0 20px 60px rgba(21,112,239,0.12); border-color: rgba(21,112,239,0.18); }
.device-card.expanded .card-expand-body { max-height: 300px; padding: 12px 0 0 0; }

/* expand toggle button */
.expand-toggle { background: transparent; border: 1px solid rgba(255,255,255,0.06); padding:6px; border-radius:6px; color: rgba(255,255,255,0.9); cursor:pointer }
.expand-toggle:focus { outline: 2px solid rgba(21,112,239,0.18); outline-offset: 2px }

/* refined status pill size */
.status-pill { padding:3px 8px; font-size:0.78em }

/* focus states for keyboard navigation */
.device-box:focus, .device-card:focus { outline: 2px solid rgba(21,112,239,0.12); outline-offset: 2px }

/* battery baseline alignment */
.card-head > div:last-child { display:flex; align-items:center }

/* small-screen adjustments */
@media (max-width: 720px) {
  .devices-list { width:100%; max-height:200px }
  .device-detail { width:100%; margin-top:12px }
  .device-card { padding:10px }
}

.device-status {
    margin-top:8px;
    color: #555;
}

.devices-detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap: 12px;
    margin-top: 12px;
}

.mini-grid { display:flex; gap:4px; margin-top:6px; }
.mini-hour { width:10px; height:18px; border-radius:2px; background: rgba(255,255,255,0.06); }
.mini-hour.filled { background: #2E7D32; box-shadow: 0 2px 6px rgba(46,125,50,0.08);} 
.mini-hour.empty { background: rgba(255,255,255,0.03); opacity:0.7 }
.history-grid-mini { display:flex; gap:4px; margin-top:6px }

.summary-row { display:flex; gap:12px; flex-wrap:wrap; }
.stat-box { border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:6px; background:#fff; }
.muted { color: #666; font-size:0.9em; }
.totals-list { margin-top:8px; display:flex; gap:12px; align-items:flex-start }
.most-used .app-icon { width:36px; height:36px; border-radius:50%; background: linear-gradient(135deg,#e6f0ff,#d6e8ff); display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#1570EF; margin-right:8px; border:1px solid rgba(21,112,239,0.08) }
.most-used .stat-text { display:inline-block }
.timeline-icon { vertical-align:middle; margin-right:6px }
.popover .muted { color:#555 }
.tot-item { margin-top:4px; }
.loading { opacity:0.7 }
.totals-list-rows { width: 100%; }
.detailed-row { padding:8px; border-radius:6px; background: rgba(255,255,255,0.04); margin-top:6px; cursor:pointer; }
.row-main { display:flex; justify-content:space-between; align-items:center; }
.row-name { font-weight:600 }
.progress { height:10px; background: rgba(0,0,0,0.06); border-radius:6px; overflow:hidden; margin-top:6px }
.progress-fill { height:100%; width:0%; transition: width 0.9s cubic-bezier(.2,.8,.2,1); }
.detailed-row.highlight { box-shadow:0 8px 22px rgba(21,112,239,0.08); }
.popover { position: absolute; background:#fff; border-radius:8px; padding:10px; box-shadow:0 8px 24px rgba(0,0,0,0.12); z-index:9999; }
.popover .muted { color:#666 }

.history-wrap { margin-top:8px }
.history-grid {
  display: grid;
  grid-template-columns: repeat(24, 1fr);
  gap: 3px;
  margin-top: 10px;
  align-items: end;
}
.history-grid .hour {
  min-height: 56px;
  border-radius: 6px;
  font-size: 10px;
  color: rgba(0,0,0,0.75);
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
.hour-bar { width: 100%; display:flex; flex-direction:column; align-items:center; gap:6px; }
.hour-label { font-size: 10px; color: var(--text-subtle); }
.history-grid .hour .filled, .history-grid .hour .empty { width:100%; border-radius:6px; display:flex; align-items:flex-end; justify-content:center; padding: 2px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.08); }
.history-grid .hour .empty { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.7);}
.history-grid .hour .filled { background: linear-gradient(180deg, rgba(96,165,250,0.95), rgba(59,130,246,0.9)); color: #fff;}

/* modal for hour details */
.modal { position: fixed; left:0; right:0; top:0; bottom:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.25); z-index:9999; }
.modal-card { background:#fff; border-radius:8px; padding:14px; width:min(560px,90%); box-shadow:0 8px 24px rgba(0,0,0,0.15); }
.modal-card h4 { margin:0 0 8px 0 }
.modal-row { padding:6px 0; border-bottom:1px dashed #eee }
.modal-actions { text-align:right; margin-top:8px }

/* donut */
.donut-wrap { display:inline-block; width:120px; height:120px; vertical-align:middle; margin-right:12px }
.donut-center { font-weight:700; text-align:center }
.tot-item { padding:6px 0 }
.app-row.highlight { background: rgba(21,112,239,0.06); }
.highlight { box-shadow: 0 6px 18px rgba(21,112,239,0.12); transition: box-shadow 0.2s; }


@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
} 

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(10px); }
}

/* --- Dark dashboard refresh --- */
:root {
  --bg: #0f1115;
  --panel: #131723;
  --panel-strong: #161b28;
  --panel-border: rgba(255, 255, 255, 0.06);
  --panel-highlight: rgba(79, 139, 255, 0.15);
  --muted: #a7b4c4;
  --font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  --card-radius: 16px;
  --accent-blue: #4f8bff;
  --accent-green: #27c499;
  --accent-orange: #ff9f43;
  --accent-purple: #9b8cff;
}

body {
  background: radial-gradient(circle at 10% 20%, rgba(79, 139, 255, 0.07) 0, rgba(79, 139, 255, 0) 25%),
    radial-gradient(circle at 80% 0%, rgba(255, 159, 67, 0.05) 0, rgba(255, 159, 67, 0) 30%),
    var(--bg);
  color: #e6eef3;
  font-family: var(--font-family);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.page-shell {
  width: 100%;
  max-width: 1280px;
  padding: 24px;
  box-sizing: border-box;
}

.card {
  width: 100%;
  max-width: 1280px;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
  border-radius: var(--card-radius);
  border: 1px solid var(--panel-border);
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.04);
  padding: 22px 20px;
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.dashboard-card {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.08);
  color: var(--text-strong);
}

.secondary-card { background: var(--panel); }

.dashboard-header {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 16px;
}

.header-actions { display: flex; gap: 10px; align-items: center; }
.eyebrow { color: var(--muted); letter-spacing: 0.06em; font-size: 0.85em; text-transform: uppercase; margin: 0 0 4px; }
.subdued { color: #dce5f2; }

.dashboard-top { margin: 10px 0 20px 0; }
.stat-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }
.stat-card { border-radius: 14px; padding: 16px; position: relative; overflow: hidden; border: 1px solid var(--panel-border); box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08); background: rgba(255, 255, 255, 0.5); color: var(--text-strong); }
.stat-card::after { content: ''; position: absolute; inset: 0; pointer-events: none; border-radius: inherit; background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0)); opacity: 0.6; }
.stat-card .stat-value { font-size: 1.6em; font-weight: 800; letter-spacing: 0.02em; color: var(--text-strong); }
.stat-card .stat-label { font-size: 0.9em; color: var(--text-subtle); }
.stat-card:hover { transform: translateY(-3px); transition: all 180ms ease; box-shadow: 0 14px 40px rgba(15, 23, 42, 0.18); }
.stat-card .stat-icon { background: rgba(37, 99, 235, 0.08); border: 1px solid rgba(37,99,235,0.15); }
.stat-card.stat-blue { border-left:4px solid var(--accent-blue); }
.stat-card.stat-green { border-left:4px solid var(--accent-green); }
.stat-card.stat-orange { border-left:4px solid var(--accent-orange); }
.stat-card.stat-purple { border-left:4px solid var(--accent-purple); }
.status-strip { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 12px; }
.status-card { background: rgba(255,255,255,0.5); border: 1px solid var(--panel-border); border-radius: 12px; padding: 14px; text-align: center; box-shadow: 0 12px 30px rgba(15,23,42,0.1); }
.status-card .status-label { color: var(--text-subtle); font-weight: 700; letter-spacing: 0.02em; }
.status-card .status-value { font-size: 1.2em; font-weight: 800; margin-top: 6px; color: #1d4ed8; }

.dashboard-main { display: grid; grid-template-columns: 320px 1fr; gap: 14px; align-items: start; }
.panel { background: var(--panel); border: 1px solid var(--panel-border); border-radius: var(--card-radius); padding: 14px; box-shadow: 0 12px 36px rgba(15,23,42,0.08); }
.panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.panel-header h4 { margin: 4px 0 0 0; }
.ghost-btn { color: #e6eef3; border: 1px solid var(--panel-border); background: rgba(255,255,255,0.04); border-radius: 10px; padding: 8px 12px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px; }
.ghost-btn:hover { background: rgba(255,255,255,0.08); box-shadow: 0 6px 18px rgba(0,0,0,0.25); }
.ghost-btn:active { transform: translateY(1px); }
.ghost-btn.spinning { opacity: 0.65; cursor: progress; }

.devices-list { padding: 8px; display: grid; grid-template-columns: repeat(auto-fill, minmax(190px, 1fr)); gap: 14px; max-height: 70vh; overflow: auto; justify-items: center; }
.device-box { background: linear-gradient(145deg, #0c1324, #0f1c35); border: 1px solid rgba(255,255,255,0.07); border-radius: 18px; padding: 16px; position: relative; box-shadow: 0 12px 26px rgba(12,18,34,0.35), inset 0 1px 0 rgba(255,255,255,0.05); width: 230px; min-height: 210px; display: flex; flex-direction: column; gap: 12px; cursor: pointer; transition: transform 200ms ease, box-shadow 240ms ease, border-color 200ms ease, background 200ms ease; }
.device-box-head { display: flex; justify-content: space-between; align-items: center; width: 100%; gap: 10px; }
.device-body { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.04); }
.device-body-label { color: #9aa6c0; font-weight: 700; letter-spacing: 0.02em; margin-bottom: 6px; }
.device-body-value { color: #e5e7eb; font-weight: 800; letter-spacing: 0.01em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.device-extra { max-height: 0; opacity: 0; overflow: hidden; transition: max-height 280ms ease, opacity 220ms ease, padding 220ms ease; display: grid; gap: 6px; padding: 0 2px; }
.device-box:hover .device-extra, .device-box:focus-visible .device-extra, .device-box.active .device-extra { max-height: 200px; opacity: 1; padding: 4px 2px 2px; }
.device-box:hover { transform: translateY(-3px); box-shadow: 0 14px 32px rgba(12,18,34,0.45); border-color: rgba(255,255,255,0.12); background: linear-gradient(145deg, #0f1c35, #0c1324); }

.device-box .device-title { color: #e5e7eb; font-weight: 800; letter-spacing: 0.02em; }
.device-box .pill-value, .device-box .pill-label { color: #dbeafe; }
.device-box .pill-label { color: #9aa6c0; }
.device-box .battery-inline span { color: #e2e8f0; }
.device-box .battery-inline svg rect[opacity] { opacity: 0.15; }
.device-box .battery-inline svg { filter: drop-shadow(0 0 4px rgba(125,211,252,0.35)); }

.device-box.active { border-color: rgba(147,197,253,0.65); box-shadow: 0 18px 38px rgba(37,99,235,0.35), 0 0 0 1px rgba(147,197,253,0.35); }

.battery-ring { position: relative; width: 64px; height: 64px; flex-shrink: 0; display: grid; place-items: center; }
.battery-ring svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.battery-ring .ring-bg { fill: none; stroke: rgba(255,255,255,0.12); stroke-width: 4; }
.battery-ring .ring-fill { fill: none; stroke-width: 4; stroke-linecap: round; transition: stroke-dashoffset 260ms ease, stroke 200ms ease; }
.battery-ring .battery-text { position: absolute; color: #e2e8f0; font-weight: 800; font-size: 0.9em; letter-spacing: 0.02em; text-shadow: 0 1px 1px rgba(0,0,0,0.35); }
.battery-ring.battery-high .ring-fill { stroke: #22c55e; }
.battery-ring.battery-mid .ring-fill { stroke: #f59e0b; }
.battery-ring.battery-low .ring-fill { stroke: #ef4444; }
.battery-ring.battery-unknown .ring-fill { stroke: #94a3b8; stroke-dashoffset: 100; }

.device-body, .device-extra { backdrop-filter: blur(2px); }
.extra-row { display: flex; align-items: center; justify-content: space-between; gap: 8px; font-weight: 700; color: #cbd5e1; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; padding: 8px 10px; }
.extra-label { color: #9aa6c0; letter-spacing: 0.02em; }
.extra-value { color: #e5e7eb; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 120px; text-align: right; }

.status-chip { padding: 6px 12px; border-radius: 999px; font-weight: 800; font-size: 0.82em; letter-spacing: 0.01em; display: inline-flex; align-items: center; justify-content: center; min-width: 86px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.1); }
.status-running { background: rgba(34,197,94,0.18); color: #22c55e; border: 1px solid rgba(34,197,94,0.45); }
.status-stopped { background: rgba(248,113,113,0.22); color: #f87171; border: 1px solid rgba(248,113,113,0.5); }
.status-standby { background: rgba(96,165,250,0.2); color: #93c5fd; border: 1px solid rgba(96,165,250,0.5); }

.charts { display: flex; flex-direction: column; gap: 12px; }
.charts-top, .charts-bottom { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
.charts-top.single { grid-template-columns: 1fr; }
.charts-bottom { grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); }
.chart-card { background: var(--panel-strong); border: 1px solid var(--panel-border); border-radius: 12px; padding: 12px; box-shadow: 0 18px 40px rgba(15,23,42,0.12); min-height: 220px; }
.chart-card h4 { margin: 0 0 10px; color: var(--text-strong); }
.heart-card-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; }
.heart-current { text-align:right; }
.heart-value { font-size: 28px; font-weight: 700; color: var(--text-strong); }
.heart-card #heart-chart-root { min-height: 240px; }
.heart-range { font-size: 12px; }
.heart-window { display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
.heart-range-btn { border:1px solid #d5dce3; background:#f7f9fb; color:var(--text-strong); padding:6px 10px; border-radius:10px; font-weight:600; font-size:12px; cursor:pointer; transition:all .2s ease; }
.heart-range-btn:hover { border-color:#2c8ca0; color:#2c8ca0; box-shadow:0 4px 12px rgba(44,140,160,0.15); }
.heart-range-btn.active { background:#e2f3f6; border-color:#2c8ca0; color:#1d6f7e; }
.heart-chart-svg { width: 100%; height: 240px; display:block; }
.heart-axis { font-size: 12px; fill: #6d7785; }
.heart-line { fill: none; stroke: #2c8ca0; stroke-width: 2.4; }
.heart-grid { stroke: #d5dce3; stroke-width: 1; opacity: 0.8; }
.heart-tooltip { position:absolute; background:#0f172a; color:#fff; padding:8px 10px; border-radius:10px; font-size:12px; box-shadow:0 8px 20px rgba(0,0,0,0.18); transform:translate(-50%,-120%); pointer-events:none; white-space:nowrap; z-index:5; }
.heart-tooltip .title { font-weight:700; margin-bottom:2px; }
.heart-marker-line { stroke:#2c8ca0; stroke-width:1.4; opacity:0.55; }
.heart-dot { fill:#2c8ca0; stroke:#fff; stroke-width:1.5; r:4; }
.heart-dot.active { fill:#0f172a; stroke:#2c8ca0; r:5.5; }
.heart-chart-wrap { position:relative; }
.heart-empty { color: var(--text-muted); text-align: center; padding: 12px 0; }
.donut-layout { display:flex; gap:16px; align-items:center; justify-content: center; }
.donut-graphic { position: relative; width: 220px; height: 220px; display:flex; align-items:center; justify-content:center; background: #0f1115; border-radius: 18px; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05); }
.donut-graphic svg { width: 200px; height: 200px; transform: rotate(-90deg); }
.history-header { display: flex; justify-content: space-between; align-items: center; color: var(--text-subtle); font-weight: 700; font-size: 0.92em; padding: 2px 2px 6px; }
.donut-center { position:absolute; inset: 36px; border-radius: 999px; background: #0b0c0f; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04); display:flex; flex-direction:column; align-items:center; justify-content:center; color:#f8fafc; text-align:center; padding:8px; }
.donut-center .title { font-size: 0.9em; color: #9ca3af; }
.donut-center .value { font-size: 1.2em; font-weight: 800; color: #f8fafc; }
.donut-center .subtitle { font-size: 0.85em; color: #c7d2fe; margin-top: 4px; }
.donut-legend { flex:1; max-height: 220px; overflow:auto; display:flex; flex-direction:column; gap:8px; padding:6px; }
.legend-item { display:flex; align-items:center; gap:10px; padding:8px 10px; background: rgba(255,255,255,0.5); border-radius: 10px; border:1px solid var(--panel-border); }
.legend-swatch { width:14px; height:14px; border-radius:4px; box-shadow: 0 0 0 1px rgba(0,0,0,0.08); flex-shrink:0; }
.legend-text { display:flex; flex-direction:column; gap:4px; }
.legend-name { font-weight: 700; color: var(--text-strong); max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.legend-meta { color: var(--text-subtle); font-size: 0.9em; }
.donut-tooltip { position: absolute; background: #101218; color: #f8fafc; border-radius: 10px; padding: 10px 12px; box-shadow: 0 12px 30px rgba(0,0,0,0.45); border: 1px solid rgba(255,255,255,0.08); pointer-events: none; transform: translate(-50%, -60%); min-width: 180px; z-index: 10; }
.donut-tooltip.hidden { display: none; }
.donut-tooltip .tooltip-title { font-weight: 800; margin-bottom: 4px; color: #e0e7ff; }
.donut-tooltip .tooltip-body { display: flex; align-items: center; gap: 8px; font-size: 0.95em; }
.donut-tooltip .tooltip-swatch { width: 14px; height: 14px; border-radius: 4px; box-shadow: 0 0 0 1px rgba(0,0,0,0.3); flex-shrink: 0; }

#progress-list .app-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(15,23,42,0.06); color: var(--text-strong); }
#progress-list .app-row .meta { font-size: 0.9em; color: var(--text-subtle); text-align: right; }
.progress { width: 100%; background: rgba(15,23,42,0.05); border-radius: 999px; overflow: hidden; border: 1px solid rgba(15,23,42,0.08); height: 8px; }
.progress-fill { height: 100%; border-radius: inherit; background: linear-gradient(90deg, #2563eb, #60a5fa); transition: width 220ms ease; box-shadow: 0 4px 12px rgba(37,99,235,0.25); }

#recent-table table { width: 100%; border-collapse: collapse; font-size: 0.95em; }
#recent-table th { text-align: left; color: var(--text-strong); background: rgba(37,99,235,0.08); }
#recent-table td, #recent-table th { padding: 10px 8px; border-bottom: 1px solid rgba(15,23,42,0.08); color: var(--text-strong); }
#recent-table tr:nth-child(even) { background: rgba(37,99,235,0.04); }
#recent-table tr.running { background: rgba(74,222,128,0.12); }
.recent-table-wrapper { max-height: 320px; overflow: hidden; position: relative; transition: max-height 200ms ease; }
.recent-table-wrapper.collapsed::after { content:''; position:absolute; inset:0; pointer-events:none; background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,0.72)); }
.recent-table-wrapper.expanded { max-height: none; }
.recent-toggle { margin-top: 8px; width: 100%; justify-content: center; }
#recent-table .app-name { max-width: 200px; display: inline-block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.progress-wrapper { max-height: 320px; overflow: hidden; position: relative; transition: max-height 180ms ease; }
.progress-wrapper.collapsed::after { content: ''; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,0.78)); pointer-events: none; }
.progress-wrapper.expanded { max-height: none; }
.progress-toggle { margin-top: 6px; width: 100%; justify-content: center; }

.chart-skeleton, .progress-skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.09), rgba(255,255,255,0.04)); background-size: 200% 100%; animation: shimmer 1.4s ease infinite; border-radius: 10px; height: 180px; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

.dg-btn { display: inline-flex; align-items: center; gap: 8px; border-radius: 12px; padding: 12px 18px; background: linear-gradient(135deg, #4f8bff, #7bc8ff); color: #0b1020; font-weight: 800; border: none; box-shadow: 0 10px 30px rgba(79,139,255,0.35); }
.dg-btn:hover { transform: translateY(-1px); box-shadow: 0 12px 36px rgba(79,139,255,0.45); }
.action-row { margin-top: 12px; display: flex; justify-content: flex-end; }

#last-updated { color: var(--muted); margin-top: 10px; text-align: right; }

@media (max-width: 1080px) {
  .dashboard-main { grid-template-columns: 1fr; }
  .charts-top, .charts-bottom { grid-template-columns: 1fr; }
}

/* Responsive adjustments for desktop and mobile */
@media (min-width: 1280px) {
  .page-shell { padding: 30px; max-width: 1380px; }
  .dashboard-main { grid-template-columns: 340px 1fr; gap: 18px; }
  .charts-top, .charts-bottom { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 900px) {
  body { background-attachment: scroll; }
  .page-shell { padding: 18px 14px; }
  .dashboard-header { flex-direction: column; }
  .status-strip { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
  .devices-list { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); max-height: none; width: 100%; }
  .device-box { width: 100%; min-height: 0; }
  .dashboard-main { grid-template-columns: 1fr; }
  .charts-top, .charts-bottom { grid-template-columns: 1fr; }
  .donut-layout { flex-direction: column; }
  .action-row { justify-content: center; }
}

@media (max-width: 540px) {
  .page-shell { padding: 16px 12px; }
  .stat-row { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
  .stat-card .stat-value { font-size: 1.4em; }
  .status-strip { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
  .heart-card #heart-chart-root { min-height: 180px; }
  .heart-chart-svg { height: 200px; }
  .ghost-btn { width: 100%; justify-content: center; }
}

/* Light theme overrides */
body {
  color: var(--text-strong);
}

.dashboard-card,
.panel,
.chart-card,
.stat-card,
.device-box,
.device-card,
.secondary-card {
  background: rgba(255, 255, 255, 0.5);
  border: 1px solid var(--panel-border);
  color: var(--text-strong);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.stat-card .stat-value { color: var(--text-strong); }
.stat-card .stat-label { color: var(--text-subtle); }
.device-app-line { color: var(--text-strong); }
.chart-card h4, .panel-header h4 { color: var(--text-strong); }

.status-chip { justify-content: center; align-items: center; display: inline-flex; }
.device-box-head { align-items: center; }
.status-running { background: rgba(34,197,94,0.16); color: #166534; }
.status-stopped { background: rgba(239,68,68,0.16); color: #991b1b; }
.status-standby { background: rgba(59,130,246,0.16); color: #1d4ed8; }

.chart-card .muted, .panel .muted { color: var(--text-subtle); }
.chart-card, .panel, .device-box { box-shadow: 0 10px 30px rgba(15,23,42,0.08); }

/* Default 50% glass effect for all cards */
.card, .panel, .stat-card, .chart-card, .device-box, .device-card, .secondary-card, .dashboard-card {
  background-color: rgba(255, 255, 255, 0.5);
}
